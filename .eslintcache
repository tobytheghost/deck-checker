[{"F:\\react-apps\\deck-checker\\src\\App.js":"1","F:\\react-apps\\deck-checker\\src\\index.js":"2","F:\\react-apps\\deck-checker\\src\\views\\index.js":"3","F:\\react-apps\\deck-checker\\src\\views\\Error\\Error.js":"4","F:\\react-apps\\deck-checker\\src\\views\\Home\\Home.js":"5","F:\\react-apps\\deck-checker\\src\\views\\Login\\Login.js":"6","F:\\react-apps\\deck-checker\\src\\components\\index.js":"7","F:\\react-apps\\deck-checker\\src\\components\\VisualSearch\\VisualSearch.js":"8","F:\\react-apps\\deck-checker\\src\\components\\Search\\Search.js":"9","F:\\react-apps\\deck-checker\\src\\Reducer.js":"10","F:\\react-apps\\deck-checker\\src\\firebase.js":"11","F:\\react-apps\\deck-checker\\src\\components\\Header\\Header.js":"12","F:\\react-apps\\deck-checker\\src\\Routes.js":"13","F:\\react-apps\\deck-checker\\src\\views\\SearchPage\\SearchPage.js":"14","F:\\react-apps\\deck-checker\\src\\helpers.js":"15","F:\\react-apps\\deck-checker\\src\\components\\QR\\QR.js":"16","F:\\react-apps\\deck-checker\\src\\views\\Profile\\Profile.js":"17","F:\\react-apps\\deck-checker\\src\\StateProvider.js":"18","F:\\react-apps\\deck-checker\\src\\views\\Deck\\Deck.js":"19","F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\Search\\Search.js":"20","F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\index.js":"21","F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\DeckTabs\\List\\List.js":"22","F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\DeckTabs\\DeckTabs.js":"23","F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\DeckTabs\\Logs\\Logs.js":"24"},{"size":812,"mtime":1609445107159,"results":"25","hashOfConfig":"26"},{"size":408,"mtime":1608841924200,"results":"27","hashOfConfig":"26"},{"size":307,"mtime":1609444451533,"results":"28","hashOfConfig":"26"},{"size":110,"mtime":1608995991233,"results":"29","hashOfConfig":"26"},{"size":3364,"mtime":1609198312985,"results":"30","hashOfConfig":"26"},{"size":1366,"mtime":1609453094058,"results":"31","hashOfConfig":"26"},{"size":139,"mtime":1609441309669,"results":"32","hashOfConfig":"26"},{"size":2702,"mtime":1608840664955,"results":"33","hashOfConfig":"26"},{"size":2754,"mtime":1609463061718,"results":"34","hashOfConfig":"26"},{"size":601,"mtime":1609160571834,"results":"35","hashOfConfig":"26"},{"size":609,"mtime":1608841579322,"results":"36","hashOfConfig":"26"},{"size":2915,"mtime":1609184708056,"results":"37","hashOfConfig":"26"},{"size":1110,"mtime":1609446150416,"results":"38","hashOfConfig":"26"},{"size":203,"mtime":1608844160393,"results":"39","hashOfConfig":"26"},{"size":4554,"mtime":1609464734435,"results":"40","hashOfConfig":"26"},{"size":694,"mtime":1609004402401,"results":"41","hashOfConfig":"26"},{"size":4792,"mtime":1609616698230,"results":"42","hashOfConfig":"26"},{"size":375,"mtime":1608841905339,"results":"43","hashOfConfig":"26"},{"size":5011,"mtime":1609616563338,"results":"44","hashOfConfig":"26"},{"size":10622,"mtime":1609505555147,"results":"45","hashOfConfig":"26"},{"size":116,"mtime":1609440566456,"results":"46","hashOfConfig":"26"},{"size":19353,"mtime":1609616880879,"results":"47","hashOfConfig":"26"},{"size":1769,"mtime":1609510966240,"results":"48","hashOfConfig":"26"},{"size":1807,"mtime":1609510860518,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"b6llbu",{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"81"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"90"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"99"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"F:\\react-apps\\deck-checker\\src\\App.js",[],["108","109"],"F:\\react-apps\\deck-checker\\src\\index.js",[],["110","111"],"F:\\react-apps\\deck-checker\\src\\views\\index.js",[],["112","113"],"F:\\react-apps\\deck-checker\\src\\views\\Error\\Error.js",[],["114","115"],"F:\\react-apps\\deck-checker\\src\\views\\Home\\Home.js",[],["116","117"],"F:\\react-apps\\deck-checker\\src\\views\\Login\\Login.js",[],"F:\\react-apps\\deck-checker\\src\\components\\index.js",[],["118","119"],"F:\\react-apps\\deck-checker\\src\\components\\VisualSearch\\VisualSearch.js",[],"F:\\react-apps\\deck-checker\\src\\components\\Search\\Search.js",[],"F:\\react-apps\\deck-checker\\src\\Reducer.js",[],["120","121"],"F:\\react-apps\\deck-checker\\src\\firebase.js",[],"F:\\react-apps\\deck-checker\\src\\components\\Header\\Header.js",[],["122","123"],"F:\\react-apps\\deck-checker\\src\\Routes.js",[],"F:\\react-apps\\deck-checker\\src\\views\\SearchPage\\SearchPage.js",[],"F:\\react-apps\\deck-checker\\src\\helpers.js",[],"F:\\react-apps\\deck-checker\\src\\components\\QR\\QR.js",[],["124","125"],"F:\\react-apps\\deck-checker\\src\\views\\Profile\\Profile.js",[],"F:\\react-apps\\deck-checker\\src\\StateProvider.js",[],"F:\\react-apps\\deck-checker\\src\\views\\Deck\\Deck.js",[],"F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\Search\\Search.js",["126"],"import React, { useState, useContext, useEffect } from \"react\";\r\nimport firebase from \"firebase\";\r\n\r\nimport { DeckContext } from \"../../Deck\";\r\nimport { addCardToDeck } from \"../../../../helpers\";\r\n\r\nimport { Card, TextField, Button } from \"@material-ui/core\";\r\n\r\nfunction Search(props) {\r\n  const {\r\n    providerDeck: { deck, setDeck },\r\n    providerList: { list, setList },\r\n    providerCanEdit: { canEdit },\r\n    providerIsNewDeck: { isNewDeck },\r\n    providerLoading: { setLoading },\r\n    providerLoadingMessage: { setLoadingMessage },\r\n  } = useContext(DeckContext);\r\n\r\n  const [cardList, setCardList] = useState([]);\r\n  const [searching, setSearching] = useState(false);\r\n  const [addCard, setAddCard] = useState(\"\");\r\n  const [importCards, setImportCards] = useState();\r\n  // eslint-disable-next-line\r\n  const [deckName, setDeckName] = useState(\"\");\r\n\r\n  const handleFormOnChange = (e) => {\r\n    const target = e.target;\r\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\r\n    const name = target.name;\r\n\r\n    switch (name) {\r\n      case \"deckName\":\r\n        setDeckName(value);\r\n        break;\r\n      case \"addCard\":\r\n        setAddCard(value);\r\n        break;\r\n      case \"importCards\":\r\n        setImportCards(value);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const searchUrl = \"https://api.scryfall.com/cards/search?q=\";\r\n  const searchCards = (search) => {\r\n    fetch(searchUrl + search)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"404\");\r\n        } else {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        setCardList(data.data);\r\n        setSearching(false);\r\n      })\r\n      .catch((error) => {\r\n        setSearching(false);\r\n      });\r\n  };\r\n\r\n  const addNewCommander = (item, quantity = 1, board = \"main\", limit = 1) => {\r\n    let updatedDeck;\r\n    if (item.layout === \"transform\") {\r\n      updatedDeck = {\r\n        commander_type: \"transform\",\r\n        deck_name: deck.deck_name,\r\n        commander_name: item.name,\r\n        commander_id: item.id,\r\n        commander_image: item.card_faces[0].image_uris.normal,\r\n        commander_image_2: item.card_faces[1].image_uris.normal,\r\n        user_id: deck.user_id,\r\n        list: JSON.stringify(list),\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      };\r\n    } else {\r\n      updatedDeck = {\r\n        commander_type: \"normal\",\r\n        deck_name: deck.deck_name,\r\n        commander_name: item.name,\r\n        commander_id: item.id,\r\n        commander_image: item.image_uris.normal,\r\n        user_id: deck.user_id,\r\n        list: JSON.stringify(list),\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      };\r\n    }\r\n    setDeck(updatedDeck);\r\n  };\r\n\r\n  const addNewCard = (item, quantity = 1, board = \"main\", limit = null) => {\r\n    const updatedList = addCardToDeck(list, item, quantity, board, limit);\r\n    setList(updatedList);\r\n    const updatedDeck = {\r\n      deck_name: deck.deck_name,\r\n      commander_name: deck.commander_name,\r\n      commander_id: deck.commander_id,\r\n      commander_image: deck.commander_image,\r\n      user_id: deck.user_id,\r\n      list: JSON.stringify(updatedList),\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n    };\r\n    setDeck(updatedDeck);\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    setAddCard(\"\");\r\n    setCardList([]);\r\n  };\r\n\r\n  const importCard = (cardName, quantity, board = \"main\") => {\r\n    const url = \"https://api.scryfall.com/cards/named?fuzzy=\";\r\n    fetch(url + cardName)\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(\"404\");\r\n        } else {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        addNewCard(data, quantity, board);\r\n      })\r\n      .catch((error) => {});\r\n  };\r\n\r\n  const throttledProcess = (items, numberOfCards, interval) => {\r\n    if (items.length === 0) {\r\n      setLoadingMessage(\"\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setLoadingMessage(\r\n      \"Importing card list ... \" +\r\n        (items.length - numberOfCards) * -1 +\r\n        \" of \" +\r\n        numberOfCards\r\n    );\r\n\r\n    importCard(items[0].name, items[0].quantity, items[0].board);\r\n\r\n    setTimeout(\r\n      () => throttledProcess(items.slice(1), numberOfCards, interval), // wrap in an arrow function to defer evaluation\r\n      interval\r\n    );\r\n  };\r\n\r\n  const runImport = () => {\r\n    setLoadingMessage(\"Importing card list ... \");\r\n    setLoading(true);\r\n    let board = \"main\";\r\n    let importList = [];\r\n    importCards\r\n      .replace(/\\r\\n/g, \"\\n\")\r\n      .split(\"\\n\")\r\n      .map((line) => {\r\n        const lineItem = line.trim();\r\n        console.log(lineItem);\r\n        if (lineItem === \"\" || lineItem.toLowerCase() === \"sideboard\") {\r\n          board = \"side\";\r\n          return true;\r\n        }\r\n        const lineItemSplit = lineItem.match(/^(\\S+)\\s(.*)/);\r\n        if (!lineItemSplit) {\r\n          return true;\r\n        }\r\n        const lineItemArray = lineItemSplit.slice(1);\r\n        if (lineItemArray.length !== 2) {\r\n          return true;\r\n        }\r\n        const quantity = parseInt(lineItemArray[0]);\r\n        if (isNaN(quantity)) {\r\n          return true;\r\n        }\r\n        const name = lineItemArray[1];\r\n        importList.push({ quantity: quantity, name: name, board: board });\r\n        return true;\r\n      });\r\n    // console.log(importList);\r\n\r\n    const numberOfCards = importList.length;\r\n\r\n    if (!numberOfCards) {\r\n      return;\r\n    }\r\n\r\n    setLoadingMessage(\"Importing card list ... 0 of \" + numberOfCards);\r\n\r\n    throttledProcess(importList, numberOfCards, 200);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      if (addCard.length > 2) {\r\n        setSearching(true);\r\n        searchCards(addCard);\r\n      }\r\n    }, 1000);\r\n    return () => clearTimeout(timeoutId);\r\n  }, [addCard]);\r\n\r\n  return (\r\n    <>\r\n      {canEdit || isNewDeck ? (\r\n        <>\r\n          <div className=\"section__card section__card--search\">\r\n            {/* <Card className=\"deck__card\"> */}\r\n            <section className=\"deck__actions deck__actions--top\">\r\n              <div className=\"deck__action deck__action--info\">\r\n                <h3 className=\"deck__action-title\">\r\n                  Add card(s) using search:\r\n                </h3>\r\n              </div>\r\n              <div className=\"deck__action deck__action--search\">\r\n                <TextField\r\n                  label=\"Search\"\r\n                  variant=\"outlined\"\r\n                  name=\"addCard\"\r\n                  type=\"text\"\r\n                  placeholder=\"Search Cards ...\"\r\n                  value={addCard}\r\n                  onChange={handleFormOnChange}\r\n                />\r\n                <div className=\"deck__clear-button\">\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    onClick={clearSearch}\r\n                  >\r\n                    Clear Search\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              {searching ? (\r\n                <div className=\"deck__search-list\">Searching ...</div>\r\n              ) : addCard.length > 2 && cardList.length > 0 ? (\r\n                <ul className=\"deck__search-list\">\r\n                  {cardList\r\n                    .filter((item, i) => {\r\n                      if (!addCard) return true;\r\n                      if (\r\n                        item.name.toLowerCase().includes(addCard.toLowerCase())\r\n                      ) {\r\n                        return true;\r\n                      }\r\n                      return false;\r\n                    })\r\n                    .slice(0, 100)\r\n                    .map((item, i) => (\r\n                      <li className=\"deck__search-item\" key={i}>\r\n                        <span>\r\n                          <div className=\"deck__search-name\">{item.name}</div>\r\n                          <div className=\"deck__search-buttons\">\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"primary\"\r\n                              onClick={() => {\r\n                                addNewCard(item);\r\n                              }}\r\n                            >\r\n                              Add to Main\r\n                            </Button>\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"primary\"\r\n                              onClick={() => {\r\n                                addNewCard(item, 1, \"side\");\r\n                              }}\r\n                            >\r\n                              Add to Side\r\n                            </Button>\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              onClick={() => {\r\n                                addNewCommander(item);\r\n                              }}\r\n                            >\r\n                              Set Deck Image\r\n                            </Button>\r\n                          </div>\r\n                        </span>\r\n                      </li>\r\n                    ))}\r\n                </ul>\r\n              ) : cardList.length ? (\r\n                <div className=\"search__list\"></div>\r\n              ) : (\r\n                <></>\r\n              )}\r\n            </section>\r\n            {/* </Card> */}\r\n          </div>\r\n          <div className=\"section__card section__card--import\">\r\n            {/* <Card className=\"deck__card\"> */}\r\n            <section className=\"deck__actions deck__actions--top\">\r\n              <div className=\"deck__action deck__action--info\">\r\n                <h3 className=\"deck__action-title\">Add card(s) from list:</h3>\r\n              </div>\r\n              <div className=\"deck__action deck__action--search\">\r\n                <TextField\r\n                  label=\"Import cards from list\"\r\n                  variant=\"outlined\"\r\n                  name=\"importCards\"\r\n                  multiline\r\n                  value={importCards}\r\n                  onChange={handleFormOnChange}\r\n                />\r\n              </div>\r\n              <div className=\"deck__import\">\r\n                <Button variant=\"contained\" color=\"primary\" onClick={runImport}>\r\n                  Import\r\n                </Button>\r\n              </div>\r\n            </section>\r\n            {/* </Card> */}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\index.js",[],"F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\DeckTabs\\List\\List.js",[],"F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\DeckTabs\\DeckTabs.js",[],"F:\\react-apps\\deck-checker\\src\\views\\Deck\\components\\DeckTabs\\Logs\\Logs.js",[],{"ruleId":"127","replacedBy":"128"},{"ruleId":"129","replacedBy":"130"},{"ruleId":"127","replacedBy":"131"},{"ruleId":"129","replacedBy":"132"},{"ruleId":"127","replacedBy":"133"},{"ruleId":"129","replacedBy":"134"},{"ruleId":"127","replacedBy":"135"},{"ruleId":"129","replacedBy":"136"},{"ruleId":"127","replacedBy":"137"},{"ruleId":"129","replacedBy":"138"},{"ruleId":"127","replacedBy":"139"},{"ruleId":"129","replacedBy":"140"},{"ruleId":"127","replacedBy":"141"},{"ruleId":"129","replacedBy":"142"},{"ruleId":"127","replacedBy":"143"},{"ruleId":"129","replacedBy":"144"},{"ruleId":"127","replacedBy":"145"},{"ruleId":"129","replacedBy":"146"},{"ruleId":"147","severity":1,"message":"148","line":7,"column":10,"nodeType":"149","messageId":"150","endLine":7,"endColumn":14},"no-native-reassign",["151"],"no-negated-in-lhs",["152"],["151"],["152"],["151"],["152"],["151"],["152"],["151"],["152"],["151"],["152"],["151"],["152"],["151"],["152"],["151"],["152"],"no-unused-vars","'Card' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]